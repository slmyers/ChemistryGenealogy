<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>
  Class: Supervision
  
    &mdash; Documentation by YARD 0.8.7.6
  
</title>

  <link rel="stylesheet" href="css/style.css" type="text/css" charset="utf-8" />

  <link rel="stylesheet" href="css/common.css" type="text/css" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  hasFrames = window.top.frames.main ? true : false;
  relpath = '';
  framesUrl = "frames.html#!Supervision.html";
</script>


  <script type="text/javascript" charset="utf-8" src="js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="js/app.js"></script>


  </head>
  <body>
    <div id="header">
      <div id="menu">
  
    <a href="_index.html">Index (S)</a> &raquo;
    
    
    <span class="title">Supervision</span>
  

  <div class="noframes"><span class="title">(</span><a href="." target="_top">no frames</a><span class="title">)</span></div>
</div>

      <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="class_list.html">
      Class List
    </a>
  
    <a class="full_list_link" id="method_list_link"
        href="method_list.html">
      Method List
    </a>
  
    <a class="full_list_link" id="file_list_link"
        href="file_list.html">
      File List
    </a>
  
</div>
      <div class="clear"></div>
    </div>

    <iframe id="search_frame"></iframe>

    <div id="content"><h1>Class: Supervision
  
  
  
</h1>

<dl class="box">
  
    <dt class="r1">Inherits:</dt>
    <dd class="r1">
      <span class="inheritName">ActiveRecord::Base</span>
      
        <ul class="fullTree">
          <li>Object</li>
          
            <li class="next">ActiveRecord::Base</li>
          
            <li class="next">Supervision</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
      </dd>
    
  
  
    
  
    
  
  
  
    <dt class="r2 last">Defined in:</dt>
    <dd class="r2 last">app/models/supervision.rb</dd>
  
</dl>
<div class="clear"></div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    
<p>Model for handling supervisions</p>


  </div>
</div>
<div class="tags">
  

</div>






  
    <h2>
      Class Method Summary
      <small>(<a href="#" class="summary_toggle">collapse</a>)</small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#new_supervision-class_method" title="new_supervision (class method)">+ (Hash{String =&gt; String, Number}) <strong>new_supervision</strong>(degree_year, degree_type, institution_name, person_name, supervisor_name) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Creates a new supervision.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#update_supervision-class_method" title="update_supervision (class method)">+ (Object) <strong>update_supervision</strong>(id, name, supervision_array_received) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Updates the supervisions and degrees that the person has.</p>
</div></span>
  
</li>

      
    </ul>
  
    <h2>
      Instance Method Summary
      <small>(<a href="#" class="summary_toggle">collapse</a>)</small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#as_json-instance_method" title="#as_json (instance method)">- (Object) <strong>as_json</strong>(options = {}) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Handles rendering a supervision in a JSON format.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#serializer_for_supervision-instance_method" title="#serializer_for_supervision (instance method)">- (Hash{String =&gt; String, Number}) <strong>serializer_for_supervision</strong>(supervision) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Makes a serialized supervision with degree information to be sent to the
frontend in a JSON format.</p>
</div></span>
  
</li>

      
    </ul>
  


  

  <div id="class_method_details" class="method_details_list">
    <h2>Class Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="new_supervision-class_method">
  
    + (<tt>Hash{String =&gt; String, Number}</tt>) <strong>new_supervision</strong>(degree_year, degree_type, institution_name, person_name, supervisor_name) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Creates a new supervision.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>degree_year</span>
      
      
        <span class='type'>(<tt>Number</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>year the degree was awarded</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>degree_type</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>type of degree awarded</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>institution_name</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>institution the degree was awarded</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>person_name</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>name of the person</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>supervisor_name</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>name of the supervisor</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Hash{String =&gt; String, Number}</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>created supervision</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/supervision.rb', line 18</span>

<span class='kw'>def</span> <span class='const'>Supervision</span><span class='period'>.</span><span class='id identifier rubyid_new_supervision'>new_supervision</span><span class='lparen'>(</span><span class='id identifier rubyid_degree_year'>degree_year</span><span class='comma'>,</span>
                                <span class='id identifier rubyid_degree_type'>degree_type</span><span class='comma'>,</span>
                                <span class='id identifier rubyid_institution_name'>institution_name</span><span class='comma'>,</span>
                                <span class='id identifier rubyid_person_name'>person_name</span><span class='comma'>,</span>
                                <span class='id identifier rubyid_supervisor_name'>supervisor_name</span><span class='rparen'>)</span>

  <span class='id identifier rubyid_degree_id'>degree_id</span> <span class='op'>=</span> <span class='const'>FindId</span><span class='period'>.</span><span class='id identifier rubyid_degree'>degree</span><span class='lparen'>(</span><span class='id identifier rubyid_degree_year'>degree_year</span><span class='comma'>,</span> <span class='id identifier rubyid_degree_type'>degree_type</span><span class='comma'>,</span> <span class='id identifier rubyid_institution_name'>institution_name</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_person_id'>person_id</span> <span class='op'>=</span> <span class='const'>FindId</span><span class='period'>.</span><span class='id identifier rubyid_person'>person</span><span class='lparen'>(</span><span class='id identifier rubyid_person_name'>person_name</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_supervisor_id'>supervisor_id</span> <span class='op'>=</span> <span class='const'>FindId</span><span class='period'>.</span><span class='id identifier rubyid_mentor_supervisor'>mentor_supervisor</span><span class='lparen'>(</span><span class='id identifier rubyid_supervisor_name'>supervisor_name</span><span class='comma'>,</span> <span class='id identifier rubyid_institution_name'>institution_name</span><span class='rparen'>)</span>

  <span class='id identifier rubyid_supervision'>supervision</span> <span class='op'>=</span> <span class='const'>Supervision</span><span class='period'>.</span><span class='id identifier rubyid_create_with'>create_with</span><span class='lparen'>(</span><span class='label'>approved:</span> <span class='kw'>false</span><span class='rparen'>)</span>
                          <span class='period'>.</span><span class='id identifier rubyid_find_or_create_by'>find_or_create_by</span><span class='lparen'>(</span><span class='label'>degree_id:</span> <span class='id identifier rubyid_degree_id'>degree_id</span><span class='comma'>,</span>
                                              <span class='label'>person_id:</span> <span class='id identifier rubyid_person_id'>person_id</span><span class='comma'>,</span>
                                              <span class='label'>supervisor_id:</span> <span class='id identifier rubyid_supervisor_id'>supervisor_id</span><span class='rparen'>)</span>
  <span class='kw'>return</span> <span class='id identifier rubyid_supervision'>supervision</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="update_supervision-class_method">
  
    + (<tt>Object</tt>) <strong>update_supervision</strong>(id, name, supervision_array_received) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
  <div class="note notetag">
    <strong>Note:</strong>
    <div class='inline'>
<p>Currently uses a quick-fix. Will hopefully actually update later.</p>
</div>
  </div>


<p>Updates the supervisions and degrees that the person has</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>id</span>
      
      
        <span class='type'>(<tt>Number</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>id of the person</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>name</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>name of the person</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>supervision_array_received</span>
      
      
        <span class='type'>(<tt>Array&lt;Hash{String =&gt; String, Number}&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>array of supervisions that the person has</p>
</div>
      
    </li>
  
</ul>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/supervision.rb', line 41</span>

<span class='kw'>def</span> <span class='const'>Supervision</span><span class='period'>.</span><span class='id identifier rubyid_update_supervision'>update_supervision</span><span class='lparen'>(</span><span class='id identifier rubyid_id'>id</span><span class='comma'>,</span> <span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid_supervision_array_received'>supervision_array_received</span><span class='rparen'>)</span>

  <span class='comment'># Creates an array of supervision ids that are connected to the person in
</span>  <span class='comment'># the database
</span>  <span class='id identifier rubyid_supervision_array'>supervision_array</span> <span class='op'>=</span> <span class='const'>Array</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>
  <span class='id identifier rubyid_supervision_find'>supervision_find</span> <span class='op'>=</span> <span class='const'>Supervision</span><span class='period'>.</span><span class='id identifier rubyid_where'>where</span><span class='lparen'>(</span><span class='symbol'>:person_id</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_id'>id</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_supervision_find'>supervision_find</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_single'>single</span><span class='op'>|</span>
    <span class='id identifier rubyid_supervision_array'>supervision_array</span><span class='period'>.</span><span class='id identifier rubyid_push'>push</span><span class='lparen'>(</span><span class='id identifier rubyid_single'>single</span><span class='period'>.</span><span class='id identifier rubyid_id'>id</span><span class='rparen'>)</span>
  <span class='kw'>end</span>

  <span class='comment'># Check that supervision_array is not nil
</span>  <span class='kw'>unless</span> <span class='id identifier rubyid_supervision_array'>supervision_array</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>

    <span class='comment'># Check that the supervision_array_received is not nil
</span>    <span class='kw'>unless</span> <span class='id identifier rubyid_supervision_array_received'>supervision_array_received</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>

      <span class='comment'># For each supervision, see if it already exists in the database
</span>      <span class='comment'># If not, create a new one
</span>      <span class='id identifier rubyid_supervision_array_received'>supervision_array_received</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_supervision'>supervision</span><span class='op'>|</span>

        <span class='comment'># This function will find or create a supervision given the required
</span>        <span class='comment'># attributes. It will also create a new degree if needed.
</span>        <span class='id identifier rubyid_supervision_object'>supervision_object</span> <span class='op'>=</span> <span class='const'>Supervision</span><span class='period'>.</span><span class='id identifier rubyid_new_supervision'>new_supervision</span><span class='lparen'>(</span><span class='id identifier rubyid_supervision'>supervision</span><span class='lbracket'>[</span><span class='symbol'>:year</span><span class='rbracket'>]</span><span class='comma'>,</span>
                                                          <span class='id identifier rubyid_supervision'>supervision</span><span class='lbracket'>[</span><span class='symbol'>:type</span><span class='rbracket'>]</span><span class='comma'>,</span>
                                                          <span class='id identifier rubyid_supervision'>supervision</span><span class='lbracket'>[</span><span class='symbol'>:institution</span><span class='rbracket'>]</span><span class='comma'>,</span>
                                                          <span class='id identifier rubyid_name'>name</span><span class='comma'>,</span>
                                                          <span class='id identifier rubyid_supervision'>supervision</span><span class='lbracket'>[</span><span class='symbol'>:supervisor</span><span class='rbracket'>]</span><span class='comma'>,</span><span class='rparen'>)</span>
        <span class='id identifier rubyid_supervision_id'>supervision_id</span> <span class='op'>=</span> <span class='id identifier rubyid_supervision_object'>supervision_object</span><span class='period'>.</span><span class='id identifier rubyid_id'>id</span>

        <span class='comment'># If the supervision is in the supervision_array, remove from the array
</span>        <span class='kw'>if</span> <span class='id identifier rubyid_supervision_array'>supervision_array</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span> <span class='id identifier rubyid_supervision_id'>supervision_id</span>
          <span class='id identifier rubyid_supervision_array'>supervision_array</span><span class='period'>.</span><span class='id identifier rubyid_delete'>delete</span><span class='lparen'>(</span><span class='id identifier rubyid_supervision_id'>supervision_id</span><span class='rparen'>)</span>
        <span class='kw'>end</span>
      <span class='kw'>end</span>

      <span class='comment'># If there are any supervisions left in supervision_array, delete them
</span>      <span class='kw'>unless</span> <span class='id identifier rubyid_supervision_array'>supervision_array</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
        <span class='id identifier rubyid_supervision_array'>supervision_array</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_supervision_id'>supervision_id</span><span class='op'>|</span>
          <span class='const'>Supervision</span><span class='period'>.</span><span class='id identifier rubyid_delete'>delete</span><span class='lparen'>(</span><span class='id identifier rubyid_supervision_id'>supervision_id</span><span class='rparen'>)</span>
        <span class='kw'>end</span>
      <span class='kw'>end</span>

    <span class='comment'># If the supervision_array_received is nil (person has no degrees/supervisions)
</span>    <span class='comment'># Then delete all supervisions in the supervision_array
</span>    <span class='kw'>else</span>
      <span class='id identifier rubyid_supervision_array'>supervision_array</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_supervision_id'>supervision_id</span><span class='op'>|</span>
        <span class='const'>Supervision</span><span class='period'>.</span><span class='id identifier rubyid_delete'>delete</span><span class='lparen'>(</span><span class='id identifier rubyid_supervision_id'>supervision_id</span><span class='rparen'>)</span>
      <span class='kw'>end</span>
    <span class='kw'>end</span>

  <span class='comment'># If there are no supervisions connected to the person, create new
</span>  <span class='comment'># supervisions and degrees for the person as long as supervision_array_received
</span>  <span class='comment'># is not nil either
</span>  <span class='comment'># In this case, degree_id, degree_approved, supervision_id, and supervision_approved
</span>  <span class='comment'># are all nil
</span>  <span class='kw'>else</span>
    <span class='kw'>unless</span> <span class='id identifier rubyid_supervision_array_received'>supervision_array_received</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
      <span class='id identifier rubyid_supervision_array_received'>supervision_array_received</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_supervision'>supervision</span><span class='op'>|</span>
        <span class='const'>Degree</span><span class='period'>.</span><span class='id identifier rubyid_new_degree'>new_degree</span><span class='lparen'>(</span><span class='id identifier rubyid_supervision'>supervision</span><span class='lbracket'>[</span><span class='symbol'>:year</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='id identifier rubyid_supervision'>supervision</span><span class='lbracket'>[</span><span class='symbol'>:type</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='id identifier rubyid_supervision'>supervision</span><span class='lbracket'>[</span><span class='symbol'>:institution</span><span class='rbracket'>]</span><span class='rparen'>)</span>
        <span class='const'>Supervision</span><span class='period'>.</span><span class='id identifier rubyid_new_supervision'>new_supervision</span><span class='lparen'>(</span><span class='id identifier rubyid_supervision'>supervision</span><span class='lbracket'>[</span><span class='symbol'>:year</span><span class='rbracket'>]</span><span class='comma'>,</span>
                                    <span class='id identifier rubyid_supervision'>supervision</span><span class='lbracket'>[</span><span class='symbol'>:type</span><span class='rbracket'>]</span><span class='comma'>,</span>
                                    <span class='id identifier rubyid_supervision'>supervision</span><span class='lbracket'>[</span><span class='symbol'>:institution</span><span class='rbracket'>]</span><span class='comma'>,</span>
                                    <span class='id identifier rubyid_name'>name</span><span class='comma'>,</span>
                                    <span class='id identifier rubyid_supervision'>supervision</span><span class='lbracket'>[</span><span class='symbol'>:supervisor</span><span class='rbracket'>]</span><span class='rparen'>)</span>
      <span class='kw'>end</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>

  <span class='comment'># # For each supervision in the supervision_array_received, check if it
</span>  <span class='comment'># # exists in the supervision_array.
</span>  <span class='comment'># # If so, then update. If not, create a new supervision and degree
</span>  <span class='comment'># supervision_array_received.each do |supervision|
</span>  <span class='comment'>#
</span>  <span class='comment'>#   # If the supervision is new, then the supervision[:supervision_id]
</span>  <span class='comment'>#   # should be nil
</span>  <span class='comment'>#   # Maybe this as well: if supervision_array.include? supervision[:supervision_id]
</span>  <span class='comment'>#   unless supervision[:supervision_id].nil?
</span>  <span class='comment'>#
</span>  <span class='comment'>#     # Check if the supervisor has changed. If so, then get new id.
</span>  <span class='comment'>#     # Gets the supervision object and the supervisor person object
</span>  <span class='comment'>#     # from the database to compare
</span>  <span class='comment'>#     # See if there&#39;s a matching supervisor in the database and update
</span>  <span class='comment'>#     # if it&#39;s not the same
</span>  <span class='comment'>#     supervisor_id = FindId.person(supervision[:supervisor])
</span>  <span class='comment'>#     supervision_object = Supervision.find(supervision[:supervision_id])
</span>  <span class='comment'>#     if supervision_object.person_id != supervisor_id
</span>  <span class='comment'>#       Supervision.update(supervision[:supervision_id], supervisor_id: supervisor_id)
</span>  <span class='comment'>#     end
</span>  <span class='comment'>#
</span>  <span class='comment'>#     # Find or create the degree id from the database
</span>  <span class='comment'>#     # If it is not the same as supervision[:degree_id], then update
</span>  <span class='comment'>#     # supervision with the new id
</span>  <span class='comment'>#     # * Since multiple people may have the same degree, it may be best
</span>  <span class='comment'>#     # not to update the degree in the database *
</span>  <span class='comment'>#     degree_id = FindId.degree(supervision[:year],
</span>  <span class='comment'>#                               supervision[:type],
</span>  <span class='comment'>#                               supervision[:institution])
</span>  <span class='comment'>#     if degree_id != supervision[:degree_id]
</span>  <span class='comment'>#       Supervision.update(supervision[:supervision_id], degree_id: degree_id)
</span>  <span class='comment'>#     end
</span>  <span class='comment'>#
</span>  <span class='comment'>#     # Remove id from the supervision_array
</span>  <span class='comment'>#     supervision_array.delete(supervision[:supervision_id])
</span>  <span class='comment'>#
</span>  <span class='comment'>#   # If the supervision[:supervision_id] is nil, then it is new so create
</span>  <span class='comment'>#   # a new supervision and degree
</span>  <span class='comment'>#   else
</span>  <span class='comment'>#     Degree.new_degree(supervision[:year], supervision[:type], supervision[:institution])
</span>  <span class='comment'>#     Supervision.new_supervision(supervision[:year],
</span>  <span class='comment'>#                                 supervision[:type],
</span>  <span class='comment'>#                                 supervision[:institution],
</span>  <span class='comment'>#                                 name,
</span>  <span class='comment'>#                                 supervision[:supervisor])
</span>  <span class='comment'>#   end
</span>  <span class='comment'># end
</span>

<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="as_json-instance_method">
  
    - (<tt>Object</tt>) <strong>as_json</strong>(options = {}) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Handles rendering a supervision in a JSON format.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


183
184
185</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/supervision.rb', line 183</span>

<span class='kw'>def</span> <span class='id identifier rubyid_as_json'>as_json</span><span class='lparen'>(</span><span class='id identifier rubyid_options'>options</span><span class='op'>=</span><span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='kw'>super</span><span class='lparen'>(</span><span class='symbol'>:except</span> <span class='op'>=&gt;</span> <span class='lbracket'>[</span><span class='symbol'>:created_at</span><span class='comma'>,</span> <span class='symbol'>:updated_at</span><span class='rbracket'>]</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="serializer_for_supervision-instance_method">
  
    - (<tt>Hash{String =&gt; String, Number}</tt>) <strong>serializer_for_supervision</strong>(supervision) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
  <div class="note notetag">
    <strong>Note:</strong>
    <div class='inline'>
<p>Could probably take ids off if the frontend isn&#39;t using it</p>
</div>
  </div>


<p>Makes a serialized supervision with degree information to be sent to the
frontend in a JSON format.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>supervision</span>
      
      
        <span class='type'>(<tt>Hash{String =&gt; String, Number}</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>a person&#39;s supervision</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Hash{String =&gt; String, Number}</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>serialized supervision</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/supervision.rb', line 165</span>

<span class='kw'>def</span> <span class='id identifier rubyid_serializer_for_supervision'>serializer_for_supervision</span><span class='lparen'>(</span><span class='id identifier rubyid_supervision'>supervision</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_result'>result</span> <span class='op'>=</span> <span class='const'>Api</span><span class='op'>::</span><span class='const'>SupervisionSerializer</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='kw'>self</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_serializable_hash'>serializable_hash</span>

  <span class='id identifier rubyid_degree'>degree</span> <span class='op'>=</span> <span class='const'>Degree</span><span class='period'>.</span><span class='id identifier rubyid_find_by'>find_by</span><span class='lparen'>(</span><span class='label'>id:</span> <span class='id identifier rubyid_degree_id'>degree_id</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_result'>result</span><span class='lbracket'>[</span><span class='symbol'>:year</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_degree'>degree</span><span class='period'>.</span><span class='id identifier rubyid_year'>year</span>
  <span class='id identifier rubyid_result'>result</span><span class='lbracket'>[</span><span class='symbol'>:supervisor</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='const'>Person</span><span class='period'>.</span><span class='id identifier rubyid_find_by'>find_by</span><span class='lparen'>(</span><span class='symbol'>:id</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_supervision'>supervision</span><span class='period'>.</span><span class='id identifier rubyid_supervisor_id'>supervisor_id</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span>
  <span class='id identifier rubyid_result'>result</span><span class='lbracket'>[</span><span class='symbol'>:institution</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='const'>Institution</span><span class='period'>.</span><span class='id identifier rubyid_find_by'>find_by</span><span class='lparen'>(</span><span class='label'>id:</span> <span class='id identifier rubyid_degree'>degree</span><span class='period'>.</span><span class='id identifier rubyid_institution_id'>institution_id</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span>
  <span class='id identifier rubyid_result'>result</span><span class='lbracket'>[</span><span class='symbol'>:type</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_degree'>degree</span><span class='period'>.</span><span class='id identifier rubyid_degree_type'>degree_type</span>

  <span class='id identifier rubyid_result'>result</span><span class='lbracket'>[</span><span class='symbol'>:degree_id</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_degree'>degree</span><span class='period'>.</span><span class='id identifier rubyid_id'>id</span>
  <span class='id identifier rubyid_result'>result</span><span class='lbracket'>[</span><span class='symbol'>:degree_approved</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_degree'>degree</span><span class='period'>.</span><span class='id identifier rubyid_approved'>approved</span>
  <span class='id identifier rubyid_result'>result</span> <span class='op'>=</span> <span class='id identifier rubyid_result'>result</span><span class='period'>.</span><span class='id identifier rubyid_except'>except</span><span class='lparen'>(</span><span class='symbol'>:id</span><span class='comma'>,</span> <span class='symbol'>:approved</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_result'>result</span><span class='lbracket'>[</span><span class='symbol'>:supervision_id</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_supervision'>supervision</span><span class='period'>.</span><span class='id identifier rubyid_id'>id</span>
  <span class='id identifier rubyid_result'>result</span><span class='lbracket'>[</span><span class='symbol'>:supervision_approved</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_supervision'>supervision</span><span class='period'>.</span><span class='id identifier rubyid_approved'>approved</span>
  <span class='kw'>return</span> <span class='id identifier rubyid_result'>result</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

    <div id="footer">
  Generated on Fri Mar 18 06:55:59 2016 by
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.8.7.6 (ruby-2.2.3).
</div>

  </body>
</html>